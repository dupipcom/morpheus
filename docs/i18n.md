# Internationalization (i18n) Implementation

This document describes the internationalization implementation for the Dupip application.

## Overview

The application now supports multiple languages through a comprehensive i18n system that:

- Automatically detects user's preferred language from browser settings
- Supports 30 different locales
- Uses Next.js middleware for locale-based routing
- Provides React hooks and context for easy translation usage

## Supported Locales

The application supports the following locales:
- Arabic (ar)
- Bengali (bn)
- Catalan (ca)
- Czech (cs)
- Danish (da)
- German (de)
- Greek (el)
- English (en) - Default
- Spanish (es)
- Estonian (et)
- Basque (eu)
- Finnish (fi)
- French (fr)
- Galician (gl)
- Hebrew (he)
- Hindi (hi)
- Hungarian (hu)
- Italian (it)
- Japanese (ja)
- Korean (ko)
- Malay (ms)
- Dutch (nl)
- Punjabi (pa)
- Polish (pl)
- Portuguese (pt)
- Romanian (ro)
- Russian (ru)
- Swedish (sv)
- Turkish (tr)
- Chinese (zh)

## Architecture

### 1. Locale Detection and Routing

The middleware (`src/middleware.ts`) automatically:
- Detects the user's preferred language from the `Accept-Language` header
- Redirects users to locale-prefixed URLs (e.g., `/es/dashboard`)
- Skips locale prefixing for API routes and app routes

### 2. Translation Files

Translations are stored in JSON files in `src/locales/`:
- Each locale has its own file (e.g., `en.json`, `es.json`)
- Translations are organized in nested objects for better structure
- Supports parameter interpolation (e.g., `{date}`, `{amount}`)

### 3. React Integration

The i18n system provides:
- `I18nProvider`: Context provider for translations
- `useI18n()`: Hook for accessing translations
- `t()`: Function for translating strings with parameter support
- `formatDate()`: Function for locale-specific date formatting

## Usage

### In Components

```tsx
import { useI18n } from "@/lib/contexts/i18n"

function MyComponent() {
  const { t, formatDate } = useI18n()
  
  return (
    <div>
      <h1>{t('dashboard.title')}</h1>
      <p>{t('dashboard.todayIs', { date: formatDate(new Date()) })}</p>
    </div>
  )
}
```

### Translation Keys

Translation keys use dot notation for nested objects:

```json
{
  "common": {
    "day": "Day",
    "week": "Week"
  },
  "dashboard": {
    "title": "Your life at a glimpse.",
    "todayIs": "Today is {date}."
  }
}
```

### Parameter Interpolation

Translations support parameter interpolation:

```tsx
// Translation: "Your earnings {timeframe}, so far: ${amount}"
t('tasks.yourEarnings', { 
  timeframe: t('dashboard.today'), 
  amount: earnings?.toLocaleString() 
})
```

## File Structure

```
src/
├── locales/           # Translation files
│   ├── en.json       # English (default)
│   ├── es.json       # Spanish
│   ├── fr.json       # French
│   └── ...           # Other locales
├── lib/
│   ├── i18n.ts       # Core i18n utilities
│   └── contexts/
│       └── i18n.tsx  # React context and hooks
├── middleware.ts     # Locale detection and routing
└── app/
    ├── constants.ts  # Locale configuration
    └── helpers.ts    # Path utilities
```

## Adding New Translations

1. Add the translation key to all locale files in `src/locales/`
2. Use the key in your component with the `t()` function
3. For parameterized strings, use `{paramName}` syntax

## Date Formatting

The system provides locale-specific date formatting:

```tsx
const { formatDate } = useI18n()
const formattedDate = formatDate(new Date()) // Returns locale-specific format
```

## Browser Language Detection

The system automatically detects the user's preferred language from:
1. Browser's `Accept-Language` header
2. Falls back to English if no supported language is found
3. Supports both full locale codes (e.g., `en-US`) and language codes (e.g., `en`)

## URL Structure

- `/en/dashboard` - English dashboard
- `/es/dashboard` - Spanish dashboard
- `/fr/dashboard` - French dashboard
- etc.

## Future Enhancements

- [ ] Add language switcher component
- [ ] Implement translation memory/caching
- [ ] Add RTL support for Arabic and Hebrew
- [ ] Integrate with translation services for automatic translation
- [ ] Add translation management interface

## Notes

- All generated locale files currently contain English text as placeholders
- Manual translation is required for proper localization
- The system gracefully falls back to English for missing translations 